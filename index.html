<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Inaiya</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.8/purify.min.js"></script>
    <!-- Link to your compiled CSS here -->
    <link rel="stylesheet" href="styles.css">
    
    <script src="https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js"></script>
    
    <script src="./secret/config.js"></script>
    
    <style>
        body { opacity: 0; transition: opacity 0.3s ease-in-out; }
        body.loaded { opacity: 1; }
    </style>
</head>
<body class="text-slate-800">

    <div id="login-overlay" class="fixed inset-0 bg-white z-[60] flex items-center justify-center p-4" style="background-color: var(--bg-light);">
        <div class="w-full max-w-sm text-center">
            <i class="fas fa-heart text-4xl mb-4 text-primary"></i>
            <h2 class="text-2xl font-bold mb-2">Welcome</h2>
            <p class="mb-4 text-gray-600">Please log in to access this page.</p>
            <input type="email" id="login-email" class="form-input text-center mb-2" placeholder="Enter your email">
            <button id="login-btn" class="btn btn-primary w-full">Send Magic Link</button>
            <p id="login-msg" class="text-sm mt-4 text-gray-500"></p>
        </div>
    </div>

    <div id="password-overlay" class="fixed inset-0 bg-white z-50 flex items-center justify-center p-4 hidden" style="background-color: var(--bg-light);">
        <div class="w-full max-w-sm text-center">
            <i class="fas fa-lock text-4xl mb-4 text-primary"></i>
            <h2 class="text-2xl font-bold mb-4">Secret Passcode</h2>
            <input type="password" id="password-input" class="form-input text-center">
            <button id="password-submit" class="btn btn-primary w-full mt-4">Unlock</button>
            <p id="password-error" class="text-red-500 text-sm mt-2 hidden">Incorrect password.</p>
        </div>
    </div>

    <div id="app-container" class="max-w-7xl mx-auto p-4 md:p-4 pb-24 md:pb-4 hidden">
        <div class="flex flex-col md:flex-row md:space-x-8">
            
            <aside id="sidebar" class="hidden md:block w-full md:w-72">
                <nav id="sidebar-nav" class="sticky top-4 bg-white rounded-2xl shadow-lg p-6">
                    <div class="text-center mb-8">
                        <img id="sidebar-spouse-photo" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" alt="Spouse Photo" class="w-24 h-24 rounded-full mx-auto object-cover shadow-md border-4 border-white">                        <h2 id="sidebar-spouse-name" class="mt-4 text-2xl font-bold">Loading...</h2>
                        <p id="sidebar-spouse-tag" class="text-sm" style="color: var(--text-light);">For You</p>
                    </div>
                    <div id="desktop-nav-items" class="space-y-2"></div>
                    <button onclick="window.app.logout()" class="w-full mt-8 text-sm text-gray-400 hover:text-red-500"><i class="fas fa-sign-out-alt"></i> Log Out</button>
                </nav>
            </aside>

            <main id="main-content" class="flex-1 p-0">
            </main>
        </div>
    </div>

    <nav id="mobile-nav" class="md:hidden fixed bottom-0 left-0 right-0 h-20 shadow-lg z-30 hidden">
        <div id="mobile-nav-items" class="flex items-center h-full overflow-x-auto px-2">
        </div>
    </nav>

    <div id="modal-container" aria-hidden="true">
        <div id="form-modal-backdrop" class="modal-backdrop" tabindex="-1"></div>
        <div id="alert-modal-backdrop" class="modal-backdrop" style="align-items: center; justify-content: center;" tabindex="-1"></div>
    </div>
    
    <div id="image-modal-backdrop" class="image-modal-backdrop" onclick="window.app.closeImageModal()">
        <div class="image-modal-content" onclick="event.stopPropagation()">
            <button class="image-modal-close" onclick="window.app.closeImageModal()">
                <i class="fas fa-times"></i>
            </button>
            
            <button class="image-modal-nav image-modal-prev" onclick="window.app.navGallery(-1)"><i class="fas fa-chevron-left"></i></button>
            <button class="image-modal-nav image-modal-next" onclick="window.app.navGallery(1)"><i class="fas fa-chevron-right"></i></button>
            
            <img id="modal-image" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" alt="" class="image-modal-img">            
            <div class="flex items-center gap-4 mt-4 w-full justify-center">
                 <div id="modal-caption" class="image-modal-caption flex-1"></div>
            </div>
        </div>
    </div>
    
    <!-- IMPORTANT: type="module" allows us to use imports/exports -->
    <script type="module" src="main.js"></script>
</body>
</html>